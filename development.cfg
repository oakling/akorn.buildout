[buildout]

parts = 
    django
    django-config
    celery
    rabbitmq
    spider-monkey
    couchdb
    couchdb-lucene-download
    couchdb-lucene
    couchdb-lucene-config
    omelette
    schedule_scripts
    console_scripts
    nose
    supervisor

extensions =
    mr.developer

eggs =
    Django
    BeautifulSoup
    feedparser
    lxml
    couchdb
    celery
    amqplib
    fabric
    pysqlite
    akorn_search
    akorn.celery
    akorn.scrapers
    ipython
    requests
    django_assets
    python-spidermonkey

auto-checkout =
    akorn_search
    akorn.celery
    akorn.scrapers
    collective.recipe.couchdblucene

show-picked-versions = true
versions = versions

[versions]
BeautifulSoup = 3.2.1
Django = 1.5
feedparser = 5.1
lxml = 2.3.3

CouchDB = 0.8
Fabric = 1.5.2
amqp = 1.0.6
anyjson = 0.3.3
billiard = 2.7.3.19
celery = 3.0.13
collective.recipe.omelette = 0.15
djangorecipe = 1.4
kombu = 2.5.4
mr.developer = 1.23
paramiko = 1.10.0
pycrypto = 2.6
python-dateutil = 1.5
zc.recipe.egg = 1.3.2

ipython = 0.13.1

[django]
recipe = djangorecipe
projectegg = akorn_search
settings = settings
eggs = ${buildout:eggs}
extra-paths = ${buildout:directory}/src
test = akorn_search

[django-config]
recipe = collective.recipe.template
input = ${buildout:directory}/src/akorn_search/akorn_search/local_settings.default.py
output = ${buildout:directory}/src/akorn_search/akorn_search/local_settings.py

[celery]
recipe = collective.recipe.celery
broker-transport = amqplib
broker-host = 127.0.0.1
broker-vhost = myvhost
broker-user = akorn
broker-password = akorn
eggs = ${buildout:eggs}

[rabbitmq]
recipe = rod.recipe.rabbitmq
url = http://www.rabbitmq.com/releases/rabbitmq-server/v3.0.4/rabbitmq-server-3.0.4.tar.gz

[spider-monkey]
recipe = hexagonit.recipe.cmmi
url = http://ftp.mozilla.org/pub/mozilla.org/js/mozjs17.0.0.tar.gz
md5sum = 20b6f8f1140ef6e47daa3b16965c9202
pre-configure-hook = ${buildout:directory}/change_spidermonkey_dir.py:change_directory

[couchdb]
recipe = buildout_couchdb
url = http://mirror.ox.ac.uk/sites/rsync.apache.org/couchdb/source/1.3.0/apache-couchdb-1.3.0.tar.gz
md5sum = 57a898ac6190d3adcca11cbc577d0381

[couchdb-lucene-download]
recipe = zerokspot.recipe.git
repository = https://github.com/rnewson/couchdb-lucene.git

[couchdb-lucene]
recipe = collective.recipe.couchdblucene

[couchdb-lucene-config]
recipe = collective.recipe.template
input = templates/local.ini
output = ${buildout:directory}/parts/couchdb/etc/couchdb/local.ini

[omelette]
recipe = collective.recipe.omelette
eggs = ${buildout:eggs}

[schedule_scripts]
recipe = zc.recipe.egg
eggs = ${buildout:eggs}
scripts =
    run_schedule
    run_all_schedule

[console_scripts]
recipe = zc.recipe.egg
eggs = ${buildout:eggs}
scripts = ipython

[nose]
recipe = pbp.recipe.noserunner
eggs = 
    ${buildout:eggs}

[supervisor]
recipe = collective.recipe.supervisor
programs =
    10 celery ${buildout:bin-directory}/celeryd
    20 rabbit ${buildout:bin-directory}/rabbitmq-server
    30 couchdb ${buildout:directory}/parts/couchdb/bin/couchdb
    40 couchdb-lucene ${buildout:directory}/lib/couchdb-lucene-0.10.0-SNAPSHOT/bin/run
    50 django (stopasgroup=true) ${buildout:bin-directory}/django [runserver]

[sources]
akorn_search = git https://github.com/oakling/Oakling.git
akorn.celery = git https://github.com/oakling/akorn.celery.git
akorn.scrapers = git https://github.com/oakling/akorn.scrapers.git
collective.recipe.couchdblucene = git https://github.com/davismr/collective.recipe.couchdblucene.git

